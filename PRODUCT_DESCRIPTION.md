# 테스트 자동화 플랫폼 - 제품 종합 설명서

## 📌 제품 개요

본 제품은 **Electron 기반의 테스트 자동화 플랫폼**으로, 코드를 모르는 QA 담당자도 브라우저에서 직접 조작한 내용을 자동으로 테스트 코드로 변환하여 실행할 수 있는 통합 시스템입니다. 

**핵심 가치**: "코딩 지식 없이 브라우저만으로 테스트 자동화 코드를 작성하고 실행할 수 있는 시스템"

---

## 🏗️ 시스템 아키텍처

### 1. 전체 구조

```
테스트 자동화 플랫폼
├── Electron GUI 애플리케이션 (메인 실행 환경)
│   ├── TROMBONE/ (제품 1)
│   ├── VIOLA/ (제품 2)
│   ├── CONTRABASS/ (제품 3)
│   └── CMP/ (제품 4)
│
├── Autoscript 시스템 (코드 자동 생성)
│   ├── Codegen GUI (Electron 기반)
│   ├── Google Sheets 연동
│   └── AI 변환 엔진 (Groq/MCP)
│
└── 테스트 실행 엔진
    ├── Playwright 기반 자동화
    ├── 병렬/직렬 실행 지원
    └── 리포트 자동 생성
```

### 2. 제품별 구조

각 제품(TROMBONE, VIOLA, CONTRABASS, CMP)은 독립적인 폴더로 구성되며, 동일한 구조를 가집니다:

```
[제품명]/
├── [제품명]-main.html          # Electron GUI 메인 화면
├── electron-scenario-runner.js  # 시나리오 실행 엔진
├── config/
│   └── test-settings.json      # 제품별 설정 파일
├── lib/
│   ├── classes/                # Manager 클래스들 (재사용 가능한 테스트 로직)
│   │   ├── LoginManager.js
│   │   ├── BaseManager.js
│   │   └── [제품별 Manager들]
│   └── report-generator.js     # 리포트 생성 엔진
├── tests/
│   ├── scenario/               # 시나리오별 테스트 파일
│   │   ├── scenario-1.spec.js
│   │   └── scenario-2.spec.js
│   └── steps/                  # 단계별 테스트 파일
└── custom-reports/             # 테스트 결과 리포트
```

---

## 🎯 핵심 기능

### 1. Electron GUI 기반 테스트 실행

**주요 특징:**
- 각 제품별 독립적인 Electron 애플리케이션
- 직관적인 GUI로 테스트 시나리오 선택 및 실행
- 실시간 로그 모니터링 및 진행 상황 추적
- 병렬/직렬 실행 지원
- 테스트 결과 리포트 자동 생성 및 이력 관리

**실행 흐름:**
1. Electron 앱 실행 (`npm start` 또는 제품별 실행)
2. GUI에서 시나리오 선택 (예: 시나리오 1, 시나리오 2)
3. "실행" 버튼 클릭
4. Playwright가 자동으로 브라우저를 열고 테스트 수행
5. 실시간 로그 표시 및 결과 리포트 자동 생성

### 2. Autoscript 시스템 (코드 자동 생성)

**핵심 목적**: 코드를 모르는 사람도 브라우저 조작만으로 테스트 코드를 생성

#### 2.1 브라우저 조작 → 코드 변환 워크플로우

```
1. 브라우저 조작 (Playwright Codegen)
   ↓
2. 자동 코드 생성 및 파싱
   ↓
3. Google Sheets에 구조화된 데이터로 저장
   ↓
4. 자연어 기반 ACTION_DESC 생성 (예: "'로그인' 버튼 클릭한다")
   ↓
5. 필요 시 Google Sheets 데이터를 Playwright 코드로 재변환
```

#### 2.2 자연어 기반 액션 파싱

**ACTION_DESC 형식:**
- 문장형: `'로그인' 버튼 클릭한다`, `'이메일' 텍스트박스에 입력한다`
- 명사형: `'로그인' 버튼 클릭`, `'이메일' 텍스트박스에 입력`

**파싱 프로세스:**
1. 정규식 기반 패턴 매칭 (90% 커버)
2. 파싱 실패 시 AI 자동 변환:
   - 1차: Groq API (빠른 변환)
   - 2차: MCP Claude Sonnet 4 (고정밀 변환)
3. 결과: 95% 이상 파싱 성공률

#### 2.3 Google Sheets 구조

| 컬럼 | 설명 | 예시 |
|------|------|------|
| CASE_ID | 테스트 케이스 ID | TC001 |
| TITLE | 테스트 제목 | 로그인 테스트 |
| STEP_NO | 단계 번호 | 1, 2, 3... |
| ACTION_DESC | 자연어 액션 설명 | '로그인' 버튼 클릭한다 |
| DATA | 입력 데이터 | admin@example.com |
| VARIABLE | 동적 값 제어 | TRUE, RANDOM, INCREMENT |
| ASSERT | 검증 조건 | visible, url:example.com |

**특징:**
- 병합 셀 지원 (CASE_ID, TITLE 병합 가능)
- 한글 지원 (테스트 제목, 액션 설명 모두 한글 가능)

#### 2.4 Codegen GUI 애플리케이션

**주요 기능:**
- **Codegen 녹화 탭**: 브라우저 조작 녹화 및 Google Sheets 저장
- **코드 변환 탭**: Google Sheets 데이터를 Playwright 코드로 변환
- 제품별 기본 URL 자동 설정 (TROMBONE, VIOLA, CONTRABASS, CMP)
- 설정 비밀번호 보호 (Okestro2018!)

**실행 방법:**
```bash
cd autoscript/electron-codegen-gui
npm start
```

### 3. Manager 클래스 자동 생성

**목적**: 재사용 가능한 테스트 로직을 클래스 형태로 자동 생성

**생성 과정:**
1. Google Sheets 데이터 읽기
2. 액션 그룹핑 (자동 또는 수동)
3. Manager 클래스 코드 생성
4. `lib/classes/[케이스ID]Manager.js`에 저장

**예시:**
```javascript
class LoginManager extends BaseManager {
  async processLogin(config) {
    // Step 1-5: 로그인 페이지 이동
    await this.navigateToLogin(config);
    // Step 6-10: 로그인 정보 입력
    await this.inputCredentials(config);
    // Step 11-15: 로그인 실행
    await this.executeLogin(config);
  }
}
```

### 4. 테스트 실행 및 리포트 생성

**실행 방식:**
- **직렬 실행**: 시나리오를 순차적으로 실행
- **병렬 실행**: 여러 시나리오를 동시에 실행 (독립적인 녹화 파일 생성)

**리포트 생성:**
- 각 시나리오별 커스텀 리포트 HTML 생성
- 실시간 로그 및 실행 이력 관리
- 테스트 결과 통계 및 시각화
- 스크린샷 및 비디오 녹화 지원

---

## 🤖 AI 적용 방식

### 1. 자연어 파싱 실패 시 AI 자동 변환

**프로세스:**
```
정규식 파싱 시도
  ↓ (실패 시)
Groq API 호출 → Playwright 코드 생성
  ↓ (실패 시)
MCP Claude Sonnet 4 호출 → 고정밀 코드 생성
  ↓
생성된 코드 통합 및 검증
```

**예시:**
- 입력: "3번째 카드의 설정 아이콘 클릭한다"
- AI 변환: `await page.locator('.card').nth(2).locator('.settings-icon').click();`

### 2. AI 변환 플래그

생성된 코드에 AI 변환 여부를 표시:
- `// Step 5: '로그인' 버튼 클릭한다 (🤖 Groq AI 변환)`
- `// Step 8: '이메일' 텍스트박스에 입력한다 (🤖 MCP 변환)`

---

## 📊 지원 제품 및 시나리오

### 제품별 지원 현황

| 제품 | 시나리오 수 | 주요 기능 |
|------|------------|----------|
| TROMBONE | 2개 (21개 중) | 업무코드 관리, CI/CD 파이프라인 |
| VIOLA | 2개 | 모니터링 대시보드, 리소스 관리 |
| CONTRABASS | 2개 | 인스턴스 생성, 로드밸런서 생성 |
| CMP | 2개 | AWS 인스턴스 생성, 대시보드 생성 |

### 시나리오 예시

**TROMBONE 시나리오 1**: 로그인 및 업무코드 등록 테스트
**VIOLA 시나리오 1**: 로그인 및 모니터링 대시보드 생성 테스트
**CONTRABASS 시나리오 1**: 로그인 및 인스턴스 생성 테스트
**CMP 시나리오 1**: 로그인 및 AWS 인스턴스 생성 테스트

---

## 🔄 데이터 플로우

### 1. 테스트 코드 생성 플로우

```
브라우저 조작 (Codegen)
  ↓
Playwright 코드 생성
  ↓
codegen-to-sheets.js 파싱
  ↓
Google Sheets 저장 (자연어 ACTION_DESC)
  ↓
sheets-to-playwright-direct.js 변환
  ↓
Playwright 테스트 코드 생성 (.spec.js)
  또는
Manager 클래스 생성 ([케이스ID]Manager.js)
```

### 2. 테스트 실행 플로우

```
Electron GUI에서 시나리오 선택
  ↓
electron-scenario-runner.js 실행
  ↓
Playwright 테스트 실행
  ↓
실시간 로그 수집
  ↓
report-generator.js 리포트 생성
  ↓
HTML 리포트 저장 (custom-reports/)
```

---

## 🛠️ 기술 스택

### 핵심 기술
- **Electron**: 데스크톱 GUI 애플리케이션
- **Playwright**: 브라우저 자동화 및 테스트 실행
- **Node.js**: 백엔드 로직 실행
- **Google Sheets API**: 테스트 케이스 데이터 관리
- **HTML/CSS/JavaScript**: GUI 및 리포트 생성

### AI 기술
- **Groq API**: 빠른 자연어 → 코드 변환
- **MCP (Claude Sonnet 4)**: 고정밀 자연어 이해
- **정규식 패턴 매칭**: 표준 액션 파싱

### 데이터 관리
- **JSON**: 설정 파일 및 테스트 결과 저장
- **Google Sheets**: 테스트 케이스 중앙 관리
- **HTML**: 리포트 및 GUI

---

## 📁 주요 파일 및 디렉토리

### Autoscript 시스템
```
autoscript/
├── codegen-to-sheets.js          # Playwright 코드 → Google Sheets 변환
├── sheets-to-playwright-direct.js # Google Sheets → Playwright 코드 변환
├── codegen-auto-sheets.js        # 대화형 codegen 실행
├── electron-codegen-gui/        # Codegen GUI 애플리케이션
│   ├── main.js                  # Electron 메인 프로세스
│   └── renderer/                # GUI 화면
├── playwright-mcp-helper.js     # MCP 자연어 변환 헬퍼
└── ai-converter/                # AI 변환 엔진
    ├── groq-client.js           # Groq API 클라이언트
    └── index.js                 # AI 변환 메인 로직
```

### 제품별 구조 (예: VIOLA)
```
VIOLA/
├── viola-main.html               # Electron GUI 메인 화면
├── electron-scenario-runner.js   # 시나리오 실행 엔진
├── config/
│   └── test-settings.json       # 제품 설정
├── lib/
│   ├── classes/                 # Manager 클래스들
│   │   ├── LoginManager.js
│   │   └── BaseManager.js
│   └── report-generator.js      # 리포트 생성
└── tests/
    └── scenario/                # 시나리오 테스트 파일
        ├── scenario-1.spec.js
        └── scenario-2.spec.js
```

---

## 🎯 사용 시나리오

### 시나리오 1: 새로운 테스트 케이스 작성 (코딩 지식 없이)

1. **Codegen GUI 실행**
   ```bash
   cd autoscript/electron-codegen-gui
   npm start
   ```

2. **브라우저 조작 녹화**
   - "Codegen 녹화" 탭 선택
   - URL, 케이스 ID, 제목 입력
   - "Codegen 녹화 시작" 클릭
   - 브라우저에서 테스트 시나리오 직접 수행
   - 브라우저 닫기 → 자동으로 Google Sheets에 저장

3. **테스트 코드 생성**
   - "코드 변환" 탭 선택
   - 케이스 ID 입력
   - "Manager 클래스 형식으로 생성" 체크 (선택)
   - "코드 변환" 클릭
   - 생성된 파일 위치 확인

4. **테스트 실행**
   - Electron GUI에서 시나리오 선택
   - "실행" 버튼 클릭
   - 실시간 로그 확인 및 결과 리포트 확인

### 시나리오 2: 기존 테스트 케이스 수정

1. Google Sheets에서 해당 케이스의 ACTION_DESC 수정
2. "코드 변환" 탭에서 코드 재생성
3. Electron GUI에서 테스트 재실행

### 시나리오 3: 병렬 테스트 실행

1. Electron GUI에서 여러 시나리오 선택
2. "병렬 실행" 버튼 클릭
3. 각 시나리오가 독립적으로 실행되며 독립적인 녹화 파일 생성

---

## 🔍 주요 특징 및 차별점

### 1. 코드 지식 불필요
- 브라우저에서 직접 조작한 내용이 자동으로 코드로 변환
- 자연어 기반 ACTION_DESC로 누구나 이해 가능
- Google Sheets 기반 협업으로 코드 리뷰 부담 감소

### 2. AI 기반 자동 변환
- 정규식 파싱 실패 시 AI가 자동으로 처리
- 복잡한 액션도 자연어로 표현 가능
- 95% 이상의 파싱 성공률

### 3. 제품별 독립성
- 각 제품이 독립적인 폴더와 설정을 가짐
- 제품별 Manager 클래스로 재사용 가능한 로직 관리
- 공통 기능은 BaseManager로 상속

### 4. 실시간 모니터링
- 테스트 실행 중 실시간 로그 표시
- 진행 상황 시각화
- 실행 이력 관리 및 리포트 자동 생성

### 5. 확장성
- 새로운 제품 추가 용이 (폴더 구조 복사)
- 새로운 시나리오 추가 용이 (spec.js 파일 추가)
- Manager 클래스로 재사용 가능한 로직 관리

---

## 📈 개선 효과

수동 테스트에서 자동화 플랫폼으로 전환함으로써 다음과 같은 개선 효과를 달성하였습니다.

기존에는 QA 담당자가 매번 브라우저를 열고 수동으로 클릭, 입력, 검증을 반복 수행해야 했으며, 회귀 테스트 시 동일한 작업을 수 시간 동안 반복적으로 실행해야 했습니다. 테스트 실행 중에는 다른 업무를 수행할 수 없었고, 실수나 누락 가능성도 존재했습니다. 테스트 결과는 수기로 기록하거나 스크린샷을 수동으로 저장해야 했습니다. 그러나 자동화 플랫폼 도입 후에는 Electron GUI에서 시나리오를 선택하고 "실행" 버튼을 클릭하는 것만으로 전체 테스트가 자동으로 실행됩니다. 회귀 테스트도 훨씬 짧은 시간 내에 완료되며, 테스트 실행 중 다른 업무를 병행할 수 있게 되었습니다. 동일한 조건에서 일관된 테스트가 실행되어 실수와 누락이 제거되었고, 스크린샷, 비디오 녹화, 상세 리포트가 자동으로 생성 및 저장됩니다.

테스트 코드 작성 측면에서는 이전에 개발자가 Playwright API를 학습하고 직접 코드를 작성해야 했으며, 복잡한 셀렉터 작성 및 디버깅에 많은 시간이 소요되었습니다. 코드 리뷰를 위해 개발자와 QA 담당자 간 반복적인 소통이 필요했고, 테스트 케이스 변경 시 코드 수정에 개발자 의존성이 발생했습니다. 하지만 자동화 플랫폼을 통해 비개발자도 브라우저에서 직접 조작한 내용이 자동으로 테스트 코드로 변환됩니다. Codegen 녹화만으로 테스트 케이스를 생성할 수 있으며, Google Sheets의 자연어 기반 ACTION_DESC로 누구나 이해할 수 있는 테스트 케이스를 관리할 수 있게 되었습니다. 테스트 케이스 변경 시에도 Google Sheets에서 수정한 후 코드가 자동으로 재생성되어 개발자 의존성이 크게 줄어들었습니다.

테스트 커버리지 및 품질 검증 측면에서는 이전에 시간 제약으로 인해 주요 기능 위주로만 테스트를 수행할 수 있었고, 매일 패치되는 환경에서 모든 기능을 매번 테스트하기 어려웠습니다. 테스트 결과의 객관적 기록 및 추적이 어려웠으며, 동일한 테스트를 반복해도 결과의 일관성을 보장하기 어려웠습니다. 자동화 플랫폼 도입 후에는 자동화된 테스트 실행으로 훨씬 더 많은 테스트 커버리지를 달성할 수 있게 되었고, 매일 패치 후 빠른 회귀 테스트로 사이드 이펙트를 조기에 발견할 수 있게 되었습니다. 모든 테스트 실행 이력과 결과가 자동으로 기록 및 관리되며, 동일한 조건에서 반복 가능한 테스트로 일관된 결과를 보장할 수 있게 되었습니다.

협업 및 유지보수 측면에서는 이전에 테스트 케이스가 문서나 엑셀에 산재되어 관리가 어려웠고, 코드 리뷰를 위해 개발자와 QA 담당자 간 반복적인 소통이 필요했습니다. 테스트 코드의 구조가 일관되지 않아 유지보수가 어려웠으며, 새로운 테스트 케이스 추가 시 기존 코드 구조를 파악해야 했습니다. 자동화 플랫폼 도입 후에는 Google Sheets 기반의 중앙 집중식 테스트 케이스 관리로 누구나 접근할 수 있게 되었고, 자연어 기반 ACTION_DESC로 코드 리뷰 부담이 감소하여 협업 효율성이 향상되었습니다. 표준화된 코드 구조와 Manager 클래스 기반의 재사용 가능한 로직 관리로 유지보수성이 크게 향상되었으며, 새로운 테스트 케이스 추가 시에도 동일한 패턴으로 쉽게 확장할 수 있게 되었습니다.

학습 곡선 및 진입 장벽 측면에서는 이전에 테스트 자동화를 위해 Playwright API를 학습해야 했고, JavaScript/TypeScript 코딩 지식이 필요했습니다. 복잡한 셀렉터 작성 및 디버깅 스킬이 필요했으며, 개발자만 테스트 코드를 작성할 수 있었습니다. 하지만 자동화 플랫폼을 통해 브라우저 조작만으로 테스트 코드를 생성할 수 있게 되어 학습 시간이 크게 단축되었고, 코딩 지식 없이도 테스트 자동화가 가능해졌습니다. AI 기반 자동 변환으로 복잡한 액션도 자연어로 표현할 수 있게 되어 비개발자도 테스트 코드를 생성하고 관리할 수 있게 되었습니다.

야간 및 무인 실행 측면에서는 이전에 수동 테스트는 QA 담당자가 직접 참여해야 했기 때문에 업무 시간에만 테스트를 수행할 수 있었고, 야간이나 주말에는 테스트를 진행할 수 없었습니다. 하지만 자동화 플랫폼 도입 후에는 사람의 개입 없이도 테스트가 자동으로 실행되므로, 야간이나 주말에도 무인으로 테스트를 수행할 수 있게 되었습니다. 이를 통해 개발자가 코드를 배포한 직후 바로 테스트를 실행하거나, 정기적으로 스케줄링된 테스트를 통해 지속적인 품질 검증이 가능해졌습니다.

빠른 피드백 루프 측면에서는 이전에 수동 테스트의 경우 테스트 결과를 확인하고 개발자에게 전달하는 데 시간이 소요되어, 버그 발견부터 수정까지의 사이클이 길었습니다. 하지만 자동화 플랫폼을 통해 테스트 실행 후 즉시 결과를 확인할 수 있고, 실패한 테스트에 대한 상세한 리포트와 스크린샷이 자동으로 생성되어 개발자에게 빠르게 전달됩니다. 이를 통해 개발자는 문제를 즉시 파악하고 수정할 수 있어, 개발-테스트-수정 사이클이 크게 단축되었습니다.

CI/CD 통합 및 확장성 측면에서는 이전에 수동 테스트는 CI/CD 파이프라인에 통합하기 어려웠고, 배포 후 별도로 테스트를 수행해야 했습니다. 또한 다양한 브라우저나 환경에서 테스트를 수행하려면 각각 수동으로 실행해야 했습니다. 하지만 자동화 플랫폼을 통해 CI/CD 파이프라인에 테스트를 통합하여 배포와 동시에 자동으로 테스트를 실행할 수 있게 되었고, 다양한 브라우저나 환경에서 동일한 테스트를 자동으로 실행할 수 있어 확장성이 크게 향상되었습니다.

테스트 데이터 관리 측면에서는 이전에 수동 테스트 시 테스트 데이터를 매번 수동으로 준비하거나 초기화해야 했고, 테스트 간 데이터 상태가 일관되지 않아 결과의 신뢰성이 떨어질 수 있었습니다. 하지만 자동화 플랫폼을 통해 테스트 데이터를 자동으로 준비하고 초기화할 수 있으며, 각 테스트 실행 시 동일한 조건의 테스트 데이터를 사용하여 일관된 결과를 보장할 수 있게 되었습니다.

조기 결함 발견 측면에서는 이전에 수동 테스트는 시간이 많이 소요되어 개발 후반부나 배포 직전에 주로 수행되었고, 이 시점에서 발견된 버그는 수정 비용이 크고 일정에 영향을 미쳤습니다. 하지만 자동화 플랫폼을 통해 개발 초기 단계부터 지속적으로 테스트를 실행할 수 있어, 버그를 조기에 발견하고 수정할 수 있게 되었습니다. 이를 통해 버그 수정 비용을 절감하고, 개발 일정에 미치는 영향을 최소화할 수 있게 되었습니다.

종합적으로, 수동 테스트에서 자동화 플랫폼으로 전환함으로써 반복적인 수동 작업의 비효율성이 제거되었고, 코딩 지식 없이도 테스트 자동화가 가능해졌으며, 매일 패치되는 환경에서 빠르고 정확한 회귀 테스트를 수행할 수 있게 되었습니다. 또한 야간 무인 실행, 빠른 피드백 루프, CI/CD 통합, 조기 결함 발견 등 다양한 측면에서 개선 효과를 달성하여, QA 담당자의 생산성과 자율성이 크게 향상되었고, 개발자와 QA 담당자 간의 협업 장벽이 낮아져 전체적인 품질 관리 효율성이 향상되었습니다.

---

## 🚀 향후 발전 방향

### 1. MCP 활용 개선
- 현재: 제한된 토큰을 계속 사용하는 구조
- 개선: 로컬 LLM 모델 활용, 토큰 사용 최적화, 캐싱 전략 도입

### 2. 제품 안정화
- 사람이 꼭 필요한 단계를 제외하고 자동화 확대
- 테스트 케이스 자동 최적화 및 중복 제거
- 실패 케이스 자동 재실행 및 디버깅 지원

### 3. 타팀 공유
- 다른 제품/팀에도 동일한 방식 적용
- 표준화된 워크플로우 공유
- 베스트 프랙티스 문서화

### 4. CI/CD 통합
- 지속적 테스트 자동화
- 패치 후 자동 회귀 테스트 실행
- 테스트 결과 자동 알림

---

## 💡 핵심 가치 제안

**"코드를 모르는 QA 담당자도 브라우저에서 직접 조작한 내용을 자동으로 테스트 코드로 변환하여, 매일 패치되는 환경에서 빠르고 정확한 회귀 테스트를 수행할 수 있는 시스템"**

이 시스템은 다음과 같은 문제를 해결합니다:
1. **반복적인 수동 테스트의 비효율성** → 자동화로 해결
2. **코딩 지식 부족으로 인한 테스트 코드 작성 어려움** → 브라우저 조작만으로 해결
3. **패치 후 사이드 이펙트 체킹의 어려움** → 빠른 회귀 테스트로 해결
4. **테스트 코드 유지보수의 어려움** → 자연어 기반 관리로 해결

---

## 📝 추가 정보

### 실행 방법
```bash
# 제품별 Electron 앱 실행
cd VIOLA && npm start
cd CONTRABASS && npm start
cd CMP && npm start
cd TROMBONE && npm start

# Codegen GUI 실행
cd autoscript/electron-codegen-gui && npm start
```

### 설정 파일
- 각 제품의 `config/test-settings.json`: 제품별 기본 설정
- `autoscript/electron-codegen-gui/config.json`: Codegen GUI 설정
- Google Sheets ID: `1UhI2li9ep1l77_9njpqVBY-g8bDDbyX5E7VmZ7Yc3AA`

### 지원 플랫폼
- Windows, macOS, Linux (Electron 기반)
- Chrome, Firefox, WebKit (Playwright 기반)

---

이 문서는 GPT가 본 제품의 전체 구조와 기능을 이해할 수 있도록 작성되었습니다.

